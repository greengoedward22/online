!function(t){"use strict";var e=!1,a={$tmpl:!1,$header:!1,$image:!1,$video:!1,$container:!1,post_type:"post",post_id:"",wait:2e3,settings:{},autoplay:!0,wrap_class:"background-video-wrapper",regex_youtube:/^.*(?:(?:youtu\.be\/|v\/|vi\/|u\/\w\/|embed\/)|(?:(?:watch)?\?v(?:i)?=|\&v(?:i)?=))([^#\&\?]*).*/,regex_vimeo:/https?:\/\/(?:www\.|player\.)?vimeo.com\/(?:channels\/(?:\w+\/)?|groups\/([^\/]*)\/videos\/|album\/(\d+)\/video\/|video\/|)(\d+)(?:$|\/|\?)/,init:function(){if(this.maybe_bg_video()){var t=ceramag_front.background_video;this.post_type=t.post_type,-1!==["post","page"].indexOf(this.post_type)&&(this.set_settings(t.pid),this.$tmpl.length&&this.$tmpl.html()&&("post"==this.post_type?this.post_background():this.page_background()),this.register_enents())}},init_home:function(){if(this.maybe_home_bg_video()){var e=ceramag_front.background_video,a=t(".top-slider-section .post");if(this.post_type=e.post_type,this.wait=3e3,"home"==this.post_type&&e.list){var i=this;a.each(function(){var e=t(this).attr("data-bg-video-id");e&&t("#loftocean-tmpl-post-background-"+e).length&&(i.set_settings.call(i,e),i.$tmpl.length&&i.$tmpl.html()&&i.list_background.call(i,t(this)))}),i.register_enents()}}},register_enents:function(){var e=this;t(window).resize(function(a){t(".top-slider-section").length?setTimeout(function(){e.resize_window_cb.call(e)},500):e.resize_window_cb.call(e)})},resize_window_cb:function(){var e=this;t("."+e.wrap_class).children().each(function(){var a=e.resize.call(e,t(this).parent(),t(this).parent().parent());t(this).css(a)})},resize:function(t,e){e.parents(".post").length&&(e=e.parents(".post").first());var a=e.width(),i=e.height(),s=t.attr("data-ratio"),o=i/a,n={width:"100%","max-width":"100%",height:"100%"};return s>o?(n.height=s*a+"px",n.width=n["max-width"]=a+"px"):s<o?(n["max-width"]=n.width=i/s+"px",n.height=i+"px"):(n["max-width"]=n.width=a+"px",n.height=i+"px"),n},maybe_bg_video:function(){return ceramag_front.background_video&&!ceramag_front.background_video.is_mobile},maybe_home_bg_video:function(){if(this.maybe_bg_video()){var t=ceramag_front.background_video;return this.post_type=t.post_type,"home"==t.post_type&&t.list}return!1},set_settings:function(e){this.post_id=e,this.$tmpl=t("#loftocean-tmpl-post-background-"+this.post_id);var a=t(this.$tmpl.html());this.$image=!!a.find(".ceramag-bg-image").length&&a.find(".ceramag-bg-image"),this.settings.start=!!this.$tmpl.attr("data-start")&&this.$tmpl.attr("data-start"),this.settings.end=!!this.$tmpl.attr("data-end")&&this.$tmpl.attr("data-end")},set_video:function(){var e=this,a=t(this.$tmpl.html());if(a.find("video").length){var i=a.find("video");this.load_videos(i)}else{var s=a.find("iframe"),o=s.attr("src"),n=this.regex_youtube.exec(o);n?"YT"in window&&e.load_youtube_video.call(e,n[1],s):(n=this.regex_vimeo.exec(o))?e.load_vimeo_video.call(e,n[3],s):(this.load_videos(s),this.$container.children("."+this.wrap_class).data("video",!1).data("vedio-type",!1))}},get_custom_duration:function(t,e){var a={start:!1,end:!1,duration:0};if(t&&t.length&&e-.7>0){var i=parseInt(t.attr("data-start")),s=parseInt(t.attr("data-end"));e-=.7,s=!isNaN(s)&&s<e&&s>0?s:e,a={start:i=!isNaN(i)&&i<e&&i>0?i:0,end:s,duration:e}}return a},load_videos:function(e){var a=this,i=e[0],s=e.attr("width")||16,o=e.attr("height")||9,n=t("<div>",{class:this.wrap_class,"data-ratio":o/s,"data-start":this.settings.start,"data-end":this.settings.end}),r=this.resize(n,this.$container);e.css(r).appendTo(n),i.addEventListener("loadedmetadata",function(t){if(n.attr("data-start")||n.attr("data-end")){var e=this.duration,i=a.get_custom_duration(n,e);i.start&&(this.currentTime=i.start),this.addEventListener("timeupdate",function(){this.currentTime>=i.end&&(this.currentTime=i.start)}),n.data("video-loaded","on")}},!1),n.data("video",i).data("video-type","native"),this.adjust_video(e),this.$container.append(n)},load_youtube_video:function(e,a){if(YT&&YT.Player){var i=this,s=t("<div>",{class:this.wrap_class,style:"opacity:0;","data-ratio":a.attr("height")/a.attr("width"),"data-start":this.settings.start,"data-end":this.settings.end}),o=t("<div>",{class:"fitvidsignore"}).appendTo(s),n=this.resize(s,this.$container),r=new YT.Player(o[0],{height:n.height,width:n.width,videoId:e,events:{onReady:function(t){t.target.mute()},onStateChange:function(t){if(YT.PlayerState.PLAYING===t.data)setTimeout(function(){i.youtube_video_show.call(i,t)},600);else if(YT.PlayerState.PAUSED===t.data);else if(YT.PlayerState.ENDED===t.data){var e=i.get_custom_duration(s,t.target.getDuration());e.start&&t.target.seekTo(e.start),t.target.playVideo()}}},playerVars:{autoplay:1,controls:0,disablekb:1,fs:0,iv_load_policy:3,loop:1,modestbranding:1,playsinline:1,rel:0,showinfo:0,start:s.attr("data-start"),end:s.attr("data-end")}});s.data("video",r).data("video-type","youtube"),this.$container.append(s)}},youtube_video_show:function(e){var a=t(e.target.a).parent(),i=this.get_custom_duration(a,e.target.getDuration()).start||0;if(e.target.getCurrentTime()>.1+i)t(e.target.a).parent().css("opacity","").data("video-loaded","on");else{var s=this;setTimeout(function(){s.youtube_video_show(e)},600)}},load_vimeo_video:function(e,a){if(Vimeo&&Vimeo.Player){var i=this,s=t("<div>",{class:this.wrap_class,style:"opacity:0;","data-ratio":a.attr("height")/a.attr("width"),"data-start":i.settings.start,"data-end":i.settings.end}),o=this.resize(s,this.$container),n="width: "+o.width+"; height: "+o.height+";",r=t("<iframe>",{class:"fitvidsignore",src:"//player.vimeo.com/video/"+e+"?loop=1&autopause=0&autoplay=1&background=1",style:n}).appendTo(s),d=new Vimeo.Player(r);d.ready().then(function(){d.setVolume(0)}),d.on("progress",function(t){var e=i.get_custom_duration(s,t.duration).start||0;if(t.seconds>e+.5){var a=s.parents(".owl-item");!a.length||a.hasClass("active")?s.css("opacity",""):this.pause().then(function(){s.css("opacity","")}),s.data("video-loaded","on"),d.off("progress")}}),(s.attr("data-start")||s.attr("data-end"))&&d.getDuration().then(function(t){var e=i.get_custom_duration(s,t);e.start&&d.setCurrentTime(e.start),d.on("timeupdate",function(t){t.seconds>=e.end&&d.setCurrentTime(e.start)})}),s.data("video",d).data("video-type","vimeo"),this.$container.append(s)}},adjust_video:function(t){t.addClass("fitvidsignore").removeAttr("height").removeAttr("width"),"VIDEO"==t[0].tagName&&(t.attr("muted","mute").attr("loop","loop"),this.autoplay?t.attr("autoplay","autoplay"):t.removeAttr("autoplay"),t[0].controls=!1)},post_background:function(){if(this.$header=t(".post-header.post-header-large"),this.$container=t("<div>",{class:"featured-img-container"}).prependTo(this.$header),this.$image&&this.$image.length){var e=!!t.fn.loftocean_get_image_src&&this.$image.loftocean_get_image_src(),a=e?"url("+e+")":this.$image.css("background-image");this.$container.css("background-image",a)}this.$header.addClass("has-post-thumbnail"),this.set_video()},page_background:function(){this.$header=t(".page-header"),this.$header.hasClass("with-bg")?this.$container=this.$header.children(".header-img-container"):(this.$container=t("<div>",{class:"header-img-container"}).prependTo(this.$header),this.$header.addClass("with-bg")),this.set_video()},list_background:function(e){if(e.length){var a=e.parents(".owl-item");this.$header=e,this.$container=e.children(".post-bg").length?e.children(".post-bg"):t("<div>",{class:"post-bg"}).prependTo(e),this.autoplay=a.length&&a.hasClass("active"),this.set_video()}}};function i(e,a){var i={};for(var s in t.extend(i,e),a)a.hasOwnProperty(s)&&(i[s]=a[s]);return i}function s(){var e=t("#page"),a=t("#page").offset().left;t("#site-header-menu #menu-main-menu .mega-menu").each(function(){t("body").hasClass("rtl")?t(this).children("ul").css("right",-(e.width()-t(this).offset().left-t(this).outerWidth(!0,!0)+a)):t(this).children("ul").css("left",-(t(this).offset().left-a))}),t("#site-header-menu .sub-menu").css("display","")}function o(a,i){var s=t("#primary"),o=t("#secondary"),n=t("#secondary .sidebar-container");if(e&&n.length&&s.length){var r=function(){var e=t("body").offset().top+20,a=t(".site-header");if(t(".post-nav").length)return t(".post-nav").outerHeight(!0,!0)+e;if(a.length&&"sticky"==a.attr("data-sticky")){return a.hasClass("sticky")?t(".site-header-main").outerHeight(!0,!0)+e:a.attr("data-threhold")?a.attr("data-threhold"):(a.addClass("sticky"),i=t(".site-header-main").outerHeight(!0,!0)+e,a.removeClass("sticky").attr("data-threhold",i),i);var i}return e}(),d=s.offset().top-r,l=o.hasClass("sidebar-sticky")?n.outerHeight(!0,!0):o.outerHeight(!0,!0)+20,h=s.outerHeight(!0,!0)-l,c=!0;s.outerWidth(!0,!0)<s.parent().width()&&h>0&&"sidebar-sticky"==o.attr("data-sticky")?(o.addClass("sidebar-sticky"),a>d&&a<d+h?(n.css({position:"fixed",top:r+"px"}),c=!1):a>=d+h&&(n.css({position:"",top:h+"px"}),c=!1)):o.removeClass("sidebar-sticky"),c&&n.css({position:"",top:""})}}function n(e){var a=t(".site-header-main").add(t(".site-header-centered.hamburger-menu")),i=t(".site-header"),s=window.innerWidth<1024&&i.hasClass("site-header-centered");if(!t("html.mobile").length&&t("body.single.single-post").length&&window.innerWidth>=600&&t(".post-nav").length)i.removeClass("sticky").css("padding-top","");else if((a.length||s)&&"sticky"==i.attr("data-sticky")){var o=i.offset().top+i.outerHeight(!0,!0),n=a.outerHeight(!0,!0),r=i;if((i.hasClass("hamburger-menu")||window.innerWidth<1024)&&i.hasClass("site-header-centered")){var d=t("#content");o=Math.max(d.offset().top,parseInt(d.css("padding-top"))),r=d,n=i.outerHeight(!0,!0)}!i.hasClass("sticky")&&e>=o?(i.addClass("sticky"),r.css("padding-top",n)):i.hasClass("sticky")&&e<o&&(i.removeClass("sticky"),r.css("padding-top",""))}}function r(e,a){var i=t("#primary > article");if(i.length&&a.length){i=i.first();var s=window.innerHeight/2,o=a.children(),n=i.children(".post-entry"),r=n.offset().top-s+o.height()/2,d=n.offset().top+n.height(),l=(t(window).innerHeight(),"");n.height()<o.height()?(o.css("top",""),a.removeClass("sticky")):e<r?(o.css("top",""),a.removeClass("sticky")):(a.addClass("sticky"),e+window.innerHeight>d?(l=(l=d-e-o.outerHeight()/2)<s?l:s,o.css("top",l)):o.css("top",""))}}t(document).ready(function(){!function(){var e=t(".woocommerce-store-notice.demo_store"),a=t("#page");function i(){"none"==e.css("display")?a.css("margin-top",""):a.css("margin-top",e.outerHeight(!0,!0))}e.length&&(t(window).on("resize",i),i(),t(".woocommerce-store-notice__dismiss-link").on("click",function(e){a.css("margin-top",""),t(window).off("resize",i)}))}();var d=t(window).innerWidth(),l=(t(window).innerHeight(),t("#primary > article > .share-love"));a.init(),s(),function(){var e=t(".footer-subscribe .widget");if(e.length&&e.hasClass("strip")){var a=e.find(".widget-title"),i=e.find(".mc4wp-form-fields"),s=t('<div class="text-container">');a.length&&s.append(a.detach().removeAttr("class")),i.children("p").length&&s.append(i.children("p").detach()),i.prepend(s)}t(".footer-subscribe").length&&t(".footer-subscribe").removeAttr("style")}(),t("input[type=submit]").length&&t("input[type=submit]").each(function(){!t(this).parent("div.button").length&&!t(this).hasClass("no-wrap")&&t(this).wrap(t("<div>",{class:"button"}))}),t("body.ceramag-single-page .post-entry img").length&&t("body.ceramag-single-page .post-entry img").each(function(){var e=t(this),a=e.attr("srcset"),i=e.attr("width")||800;if(e.attr("width")>=800){var s=e.parents("figure.wp-caption"),o=e.parents("p"),n=t("<div>",{class:"wide-image"});if(s.length?s.first().wrap(n):o.length?o.first().before(n.append(o.first().children())).remove():e.wrap(n),i<d&&a){var r=a.split(","),l=i;r.length&&(l=function(e,a,i){if(e&&e.length){var s=[];t.each(e,function(t,e){s.push(parseInt(e.split(" ").pop()))}),s=s.sort(function(t,e){return t-e}),t.each(s,function(t,e){if(i=e,e>=a)return!1})}return i}(r,d,l),e.attr("sizes","(max-width: "+l+"px) 100vw, "+l+"px").attr("width",l).attr("height",""))}}e.parent("a").length&&e.parent("a").addClass("image-link")}),t(window).resize(function(){var e=t(this).scrollTop(),a=t(".site-header"),i=t("#content");d=t(window).innerWidth(),t(window).innerHeight(),s(),"sticky"==a.attr("data-sticky")&&(window.innerWidth<1024?a.css("padding-top",""):i.css("padding-top",""),a.removeAttr("data-threhold"),n(e)),o(e),l.length&&r(e,l),d>1024&&t(".ceramag-side-menu").hasClass("show")&&t(".ceramag-side-menu.show .close-button").trigger("click")}).scroll(function(e){var a=t(this).scrollTop(),i=t(".to-top");if(t(".post-nav").length){var s=t("#content"),d=t(".post-nav");s.length&&a>s.offset().top-80?d.addClass("show"):d.removeClass("show")}o(a),n(a),l.length&&r(a,l),i.length&&a>100?i.addClass("show"):i.removeClass("show")}).load(function(){var a,i,s=t(this).scrollTop();e=!0,t("#content").fitVids(),a=t(".wp-video"),i=t(".posts .format-audio .wp-audio-shortcode.mejs-audio"),a.length&&a.each(function(){var e=t(this),a=e.find(".mejs-container"),i=e.width(),s=t(this).parent().width();e.css("width","100%"),a.length&&a.css({width:s,height:s*a.height()/i}).trigger("resize")}),i.length&&i.css("margin-bottom","30px"),o(s),l.length&&r(s,l)}).trigger("scroll");var h={loop:!0,nav:!1,items:1,smartSpeed:350};if(t("body").hasClass("rtl")&&(h.rtl=!0),t(".top-slider").length){var c=t(".top-slider-section"),p=i(h,{nav:!0,smartSpeed:700});a.maybe_home_bg_video()&&(p=i(p,{video:!0})),ceramag_front&&ceramag_front.top_slider_auto_play&&(p=i(p,{autoplay:!0,autoplayHoverPause:!0,smartSpeed:ceramag_front.top_slider_transition,autoplayTimeout:ceramag_front.top_slider_timeout})),c.hasClass("centered-slider")?p.responsive={768:{stagePadding:150,margin:2}}:c.hasClass("split-slider")&&(p.responsive={768:{items:2,margin:2}}),t(".top-slider").on("changed.owl.carousel",function(e){if(e.item.index>0){var a=t(this).find(".background-video-wrapper"),i=t(t(this).find(".owl-item").get(e.item.index)).find(".background-video-wrapper");a.length&&i.length&&(a.not(i).each(function(){var e=t(this).data("video"),a=t(this).data("video-loaded"),i=t(this).data("video-type");if(i&&e&&a)switch(i){case"native":case"vimeo":e.pause&&e.pause();break;case"youtube":e.pauseVideo&&e.pauseVideo()}}),i.length&&i.each(function(){var e=t(this).data("video"),a=t(this).data("video-loaded"),i=t(this).data("video-type");if(i&&e&&a)switch(i){case"native":case"vimeo":e.play&&e.play();break;case"youtube":e.playVideo&&e.playVideo()}}))}}).on("initialized.owl.carousel",function(e){o(t(window).scrollTop()),t("body").trigger("loftocean.preloader.done",t(this)),a.init_home()}).owlCarousel(p)}(t(".featured-posts").length&&t(".featured-posts").on("initialized.owl.carousel",function(e){o(t(window).scrollTop()),t("body").trigger("loftocean.preloader.done",t(this))}).owlCarousel(i(h,{margin:15,smartSpeed:400,responsive:{0:{margin:0,items:1},768:{items:3},1024:{items:4},1200:{items:4}}})),t(".post-header-gallery").length)&&((p=i(h,{nav:!0,dots:!1})).smartSpeed=t("body.post-template-normal-header").length?350:700,t(".post-header-gallery").on("initialized.owl.carousel",function(e){var a=t(this).next(".zoom");t("body").trigger("loftocean.preloader.done",t(this)),a.length&&a.removeAttr("style")}).owlCarousel(p));if((t(".slider-gallery").length||t(".post-gallery").length)&&t(".slider-gallery").add(t(".post-gallery")).on("initialized.owl.carousel",function(e){var a=t(this).next(".zoom");t("body").trigger("loftocean.preloader.done",t(this)),a.length&&a.removeAttr("style")}).owlCarousel(i(h,{nav:!0,dots:!1})),t(".widget_posts_slider").length&&t(".widget_posts_slider").on("initialized.owl.carousel",function(e){t("body").trigger("loftocean.preloader.done",t(this))}).owlCarousel(h),t(".owl-carousel").length){var g=t(".owl-carousel"),u=t("body");g.attr("tabindex",0).hover(function(e){t(this).focus()},function(e){t(this).blur()}).on("keydown",function(e){if(37==e.which)u.hasClass("rtl")?t(this).find(".owl-next").click():t(this).find(".owl-prev").click();else if(39==e.which)u.hasClass("rtl")?t(this).find(".owl-prev").click():t(this).find(".owl-next").click();else if(27==e.which){var a=t(this).siblings(".loftocean-gallery-zoom");t("body").hasClass("gallery-zoom")&&a.length&&a.trigger("click")}})}t("body").on("click","#site-header-search .search-button, .post-nav .search-button",function(e){e.preventDefault(),t(".search-screen").addClass("show"),t("body").css("overflow","hidden"),setTimeout(function(){t(".search-screen").find(".search-input").focus()},350)}).on("click",".search-screen .close-button",function(e){e.preventDefault(),t(".search-screen").removeClass("show"),t("body").css("overflow","")}).on("change",".search-screen input[name=s]",function(e){if(t(".search-screen").hasClass("simple"))return"";var a=t.trim(t(this).val()),i=t(".search-screen .search-results");if(a){var s=ceramag_front.ajax_search;s.s=a,t.post(s.url,s).done(function(e){e.success&&e.data&&i.children(".search-shortcuts").css("display","none").end().children(".results-list").remove().end().append(t("<div>",{class:"results-list",html:e.data}))})}else i.children(".search-shortcuts").css("display",""),i.children(".results-list").remove()}).on("keyup",".search-screen input[name=s]",function(e){if(t(".search-screen").hasClass("simple"))return"";t(this).trigger("change")}).on("hover","#site-header-menu #menu-main-menu .mega-menu .sub-cat-list li",function(e){if(!t(this).hasClass("current")){var a=t(this).parents(".sub-cat-list").first().siblings(".sub-cat-posts").first();t(this).siblings(".current").removeClass("current").end().addClass("current"),a.children(".current").removeClass("current"),a.children("."+t(this).attr("data-id")).addClass("current")}}).on("click",".site-header .menu-toggle, .post-nav .menu-toggle",function(e){e.preventDefault(),t("body").css("overflow","hidden"),t(".ceramag-side-menu").addClass("show")}).on("click",".ceramag-side-menu.show .close-button",function(e){e.preventDefault(),t("body").css("overflow",""),t(".ceramag-side-menu").removeClass("show")}).on("click",".ceramag-side-menu.show .dropdown-toggle",function(e){e.preventDefault(),t(this).hasClass("toggled-on")?t(this).parent().find(".toggled-on").removeClass("toggled-on"):(t(this).parent().siblings("li").find(".toggled-on").removeClass("toggled-on"),t(this).addClass("toggled-on"))}).on("click",".ceramag-widget_posts.posts-tabs .widget-title span",function(e){if(!t(this).hasClass("active")){var a=t(this).parent().children().index(t(this)),i=t(this).parents(".widget-title").first().siblings(".posts-tab-content");t(this).siblings("span").removeClass("active").end().addClass("active"),i.filter(".active").removeClass("active"),t(i.get(a)).addClass("active")}}).on("click",".to-top",function(e){e.preventDefault();var a=t(window).scrollTop();t("html, body").animate({scrollTop:0},a/2)}).on("added_to_cart updated_wc_div",function(e,a,i,s){return"undefined"!=typeof wc_add_to_cart_params&&(!!t("#site-header-cart .cart-contents .count").length&&void t.post(wc_add_to_cart_params.ajax_url,{action:"woocommerce_get_count"},function(e){t("#site-header-cart .cart-contents .count").text(e.data)}))}).on("click","#site-header-cart",function(e){e.preventDefault();var a=t(".ceramag-side-cart");a.length&&!a.hasClass("show")&&(a.addClass("show"),t("body").css("overflow","hidden"))}).on("click",".ceramag-side-cart .close-button",function(e){e.preventDefault();var a=t(".ceramag-side-cart");a.length&&a.hasClass("show")&&(a.removeClass("show"),t("body").css("overflow",""))});var f=t(".navigation.pagination a.load-more-btn"),m=t("#primary.content-area > .posts");if(f.length&&m.length){var v=t("span.load-more-btn.loading"),w=t("span.load-more-btn.no-more-posts");f.on("click",function(e){e.preventDefault();var a=t(this);a.attr("href")&&(a.css("display","none"),v.length&&v.css("display",""),t.post(a.attr("href"),{ajax_load:"on"}).done(function(e){var s=t(e),o=s.children(".post"),n=o.find(".post-gallery"),r=o.find("iframe"),d=s.children(".navigation.pagination");o.length&&(m.children(".post").last().after(o),r.length&&r.load(function(e){t(this).parent().fitVids()}),o.loftocean_image_preloader(),n.length&&n.owlCarousel(i(h,{nav:!0,dots:!1}))),v.length&&v.css("display","none"),d.length?a.attr("href",d.find(".load-more-btn").attr("href")).css("display",""):(w.css("display",""),setTimeout(function(){w.remove()},1e3))}).fail(function(t){v.length&&v.css("display","none"),a.css("display","")}))})}})}(jQuery);